<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Ç´„Éº„ÉâË®òÊÜ∂Ë°ì - „Ç≤„Éº„É†085</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            padding: 20px;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            max-width: 1400px;
            width: 100%;
            text-align: center;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            max-height: 90vh;
            overflow-y: auto;
        }

        .game-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .game-description {
            font-size: 1.1rem;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
            min-width: 120px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .game-board {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            min-height: 600px;
            display: grid;
            grid-template-rows: auto auto 1fr auto;
            gap: 20px;
        }

        .memory-phase {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .phase-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #f1c40f;
            margin: 10px 0;
        }

        .phase-description {
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .timer-display {
            font-size: 2rem;
            font-weight: bold;
            color: #e74c3c;
            margin: 10px 0;
        }

        .card-display-area {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            min-height: 400px;
        }

        .deck-info {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #f1c40f;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            max-height: 350px;
            overflow-y: auto;
        }

        .memory-card {
            background: white;
            color: #333;
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
        }

        .memory-card:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .memory-card.hidden {
            background: #2c3e50;
            color: white;
            border-color: #34495e;
        }

        .memory-card.correct {
            background: #e8f5e8;
            border-color: #27ae60;
            border-width: 3px;
        }

        .memory-card.incorrect {
            background: #fde8e8;
            border-color: #e74c3c;
            border-width: 3px;
        }

        .memory-card.selected {
            border-color: #f1c40f;
            border-width: 3px;
            transform: scale(1.08);
        }

        .card-position {
            position: absolute;
            top: 2px;
            left: 2px;
            background: #3498db;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .card-suit {
            font-size: 1.2rem;
            margin: 5px 0;
        }

        .card-value {
            font-size: 1rem;
            font-weight: bold;
            margin: 2px 0;
        }

        .card-color {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .technique-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }

        .technique-title {
            font-weight: bold;
            color: #f1c40f;
            margin-bottom: 10px;
        }

        .technique-indicators {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .technique-item {
            text-align: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }

        .technique-label {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .technique-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #3498db;
        }

        .controls {
            margin: 20px 0;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(135deg, #8360c3, #2ebf91);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn.primary {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }

        .btn.warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .btn.danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }

        .instructions h3 {
            color: #f1c40f;
            margin-bottom: 15px;
            text-align: center;
        }

        .instructions ul {
            margin-left: 20px;
        }

        .instructions li {
            margin: 8px 0;
            line-height: 1.4;
        }

        .game-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }

        .memory-technique-guide {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: left;
        }

        .guide-title {
            color: #f1c40f;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .guide-content {
            font-size: 0.9rem;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .cards-grid {
                grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
                gap: 8px;
            }

            .memory-card {
                min-height: 70px;
                padding: 6px;
            }

            .technique-indicators {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .game-container {
                padding: 20px;
            }

            .stat {
                min-width: 100px;
                padding: 8px 15px;
            }
        }
    </style>
</head>
<body>
    <button class="back-btn" onclick="window.location.href = '../index.html'">‚Üê „É°„Éã„É•„Éº„Å´Êàª„Çã</button>

    <div class="game-container">
        <h1 class="game-title">üß† „Ç´„Éº„ÉâË®òÊÜ∂Ë°ì</h1>
        <p class="game-description">È´òÂ∫¶„Å™Ë®òÊÜ∂Ë°ì„Å®„Ç´„Éº„ÉâÈÖçÂàóË®òÊÜ∂„Å´„Çà„ÇãË®òÊÜ∂ÊäÄË°ì„Éû„Çπ„Çø„Éº„Ç≤„Éº„É†</p>

        <div class="game-stats">
            <div class="stat">
                <div class="stat-label">„Çª„ÉÉ„Ç∑„Éß„É≥Êï∞</div>
                <div class="stat-value" id="sessionCount">0/15</div>
            </div>
            <div class="stat">
                <div class="stat-label">Ë®òÊÜ∂Á≤æÂ∫¶</div>
                <div class="stat-value" id="memoryAccuracy">0%</div>
            </div>
            <div class="stat">
                <div class="stat-label">ÊäÄÊ≥ïÁøíÂæó</div>
                <div class="stat-value" id="techniqueLevel">0%</div>
            </div>
            <div class="stat">
                <div class="stat-label">Èï∑ÊúüÂÆöÁùÄ</div>
                <div class="stat-value" id="retentionRate">0%</div>
            </div>
        </div>

        <div class="game-info">
            <div id="gameStatus">Êñ∞„Åó„ÅÑË®òÊÜ∂„Çª„ÉÉ„Ç∑„Éß„É≥„ÇíÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ</div>
        </div>

        <div class="game-board">
            <div class="memory-phase">
                <div class="phase-title" id="phaseTitle">Ë®òÊÜ∂„Éï„Çß„Éº„Ç∫</div>
                <div class="phase-description" id="phaseDescription">
                    52Êûö„ÅÆ„Ç´„Éº„ÉâÈÖçÂàó„ÇíË®òÊÜ∂„Åó„Å¶„Åè„Å†„Åï„ÅÑ
                </div>
                <div class="timer-display" id="timerDisplay">3:00</div>
            </div>

            <div class="card-display-area">
                <div class="deck-info" id="deckInfo">
                    ÂÆåÂÖ®„Å™„Éà„É©„É≥„Éó„Éá„ÉÉ„Ç≠ - 52Êûö„ÅÆ„Ç´„Éº„ÉâÈÖçÂàó„ÇíË®òÊÜ∂
                </div>
                <div class="cards-grid" id="cardsGrid"></div>
            </div>

            <div class="technique-panel">
                <div class="technique-title">üéØ Ë®òÊÜ∂ÊäÄÊ≥ïÂàÜÊûê</div>
                <div class="technique-indicators">
                    <div class="technique-item">
                        <div class="technique-label">Ë¶ñË¶öË®òÊÜ∂</div>
                        <div class="technique-value" id="visualMemory">0</div>
                    </div>
                    <div class="technique-item">
                        <div class="technique-label">È†ÜÂ∫èË®òÊÜ∂</div>
                        <div class="technique-value" id="sequenceMemory">0</div>
                    </div>
                    <div class="technique-item">
                        <div class="technique-label">Èñ¢ÈÄ£Ë®òÊÜ∂</div>
                        <div class="technique-value" id="associativeMemory">0</div>
                    </div>
                </div>
                <div id="techniqueAdvice" style="margin-top: 15px; font-size: 0.9rem;">
                    Ë®òÊÜ∂Ë°ìÊåáÂ∞é„Ç∑„Çπ„ÉÜ„É†„Åå„ÅÇ„Å™„Åü„ÅÆË®òÊÜ∂„Éó„É≠„Çª„Çπ„ÇíÂàÜÊûê„Åó„ÄÅÊúÄÈÅ©„Å™ÊäÄÊ≥ï„Çí„Ç¢„Éâ„Éê„Ç§„Çπ„Åó„Åæ„Åô
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="btn primary" onclick="startMemorySession()">Ë®òÊÜ∂ÈñãÂßã</button>
            <button class="btn" onclick="startRecall()" id="recallBtn" disabled>ÂÜçÁèæÈñãÂßã</button>
            <button class="btn warning" onclick="showTechniques()">ÊäÄÊ≥ï„Ç¨„Ç§„Éâ</button>
            <button class="btn" onclick="checkProgress()" id="progressBtn">ÈÄ≤ÊçóÁ¢∫Ë™ç</button>
            <button class="btn primary" onclick="completeSession()" id="completeBtn" disabled>„Çª„ÉÉ„Ç∑„Éß„É≥ÂÆå‰∫Ü</button>
        </div>

        <div class="memory-technique-guide">
            <div class="guide-title">üß† Ë®òÊÜ∂Ë°ìÊåáÂ∞é„Ç∑„Çπ„ÉÜ„É†</div>
            <div class="guide-content" id="techniqueGuide">
                <strong>Âü∫Êú¨ÊäÄÊ≥ï:</strong><br>
                1. <strong>Ë¶ñË¶öÂåñÊ≥ï:</strong> „Ç´„Éº„Éâ„ÅÆËâ≤„ÄÅÂΩ¢„ÄÅÊï∞Â≠ó„ÇíÈÆÆÊòé„Å™ÁîªÂÉè„Å®„Åó„Å¶Ë®òÊÜ∂<br>
                2. <strong>ÈÄ£ÊÉ≥Ê≥ï:</strong> „Ç´„Éº„ÉâÂêåÂ£´„ÇíÁâ©Ë™û„ÇÑÈñ¢ÈÄ£ÊÄß„ÅßÁµê„Å≥„Å§„Åë„Å¶Ë®òÊÜ∂<br>
                3. <strong>Â†¥ÊâÄÊ≥ï:</strong> È¶¥Êüì„Åø„ÅÆ„ÅÇ„ÇãÂ†¥ÊâÄ„Å´„Ç´„Éº„Éâ„ÇíÈÖçÁΩÆ„Åó„Å¶Ë®òÊÜ∂<br>
                4. <strong>ÂàÜÂâ≤Ê≥ï:</strong> 52Êûö„Çí4„Å§„ÅÆ13Êûö„Ç∞„É´„Éº„Éó„Å´ÂàÜ„Åë„Å¶Ë®òÊÜ∂<br>
                5. <strong>ÂèçÂæ©Ê≥ï:</strong> Áü≠ÊôÇÈñì„ÅßË§áÊï∞ÂõûÁ¢∫Ë™ç„Åó„Å¶ÂÆöÁùÄÂº∑Âåñ
            </div>
        </div>

        <div class="instructions">
            <h3>üìã Ë©≥Á¥∞„É´„Éº„É´„ÉªÈÅä„Å≥Êñπ</h3>
            <ul>
                <li><strong>ÁõÆÁöÑ:</strong> 15„Çª„ÉÉ„Ç∑„Éß„É≥„Åß95%‰ª•‰∏ä„ÅÆË®òÊÜ∂Á≤æÂ∫¶ÈÅîÊàê„Åß„Éû„Çπ„Çø„ÉºË™çÂÆö</li>
                <li><strong>Âü∫Êú¨„É´„Éº„É´:</strong>
                    <ul>
                        <li>ÂÆåÂÖ®„Å™„Éà„É©„É≥„Éó„Éá„ÉÉ„Ç≠52Êûö„ÅÆÈÖçÂàó„ÇíË®òÊÜ∂</li>
                        <li>3ÂàÜÈñì„ÅÆË®òÊÜ∂ÊôÇÈñì„ÅßÈ†ÜÂ∫è„Å®ÂÜÖÂÆπ„ÇíË¶ö„Åà„Çã</li>
                        <li>Ë®òÊÜ∂Âæå„Å´Ê≠£Á¢∫„Å™È†ÜÂ∫è„Åß„Ç´„Éº„Éâ„ÇíÂÜçÁèæ</li>
                        <li>Èï∑ÊúüË®òÊÜ∂„ÅÆÂÆöÁùÄÂ∫¶„ÇÇË©ï‰æ°ÂØæË±°</li>
                    </ul>
                </li>
                <li><strong>Ë®òÊÜ∂ÊäÄÊ≥ï:</strong>
                    <ul>
                        <li>Ë¶ñË¶öÂåñÊ≥ï„Åß„Ç´„Éº„Éâ„ÅÆ„Ç§„É°„Éº„Ç∏„ÇíÈÆÆÊòé„Å´Ë®òÊÜ∂</li>
                        <li>ÈÄ£ÊÉ≥Ê≥ï„Åß„Ç´„Éº„ÉâÈñì„ÅÆÈñ¢‰øÇÊÄß„ÇíÊßãÁØâ</li>
                        <li>Â†¥ÊâÄÊ≥ï„ÅßÁ©∫ÈñìÁöÑË®òÊÜ∂„ÇíÊ¥ªÁî®</li>
                        <li>ÂàÜÂâ≤Ê≥ï„ÅßË®òÊÜ∂„ÅÆË≤†Ëç∑„ÇíËªΩÊ∏õ</li>
                    </ul>
                </li>
                <li><strong>Ë©ï‰æ°Ë¶ÅÁ¥†:</strong> Ë®òÊÜ∂Á≤æÂ∫¶„ÄÅË®òÊÜ∂Ë°ìÁøíÂæóÂ∫¶„ÄÅÈï∑ÊúüË®òÊÜ∂Âäõ„ÄÅÊäÄÊ≥ïÂøúÁî®Âäõ</li>
                <li><strong>„ÇØ„É™„Ç¢Êù°‰ª∂:</strong> 15„Çª„ÉÉ„Ç∑„Éß„É≥„Åß95%‰ª•‰∏ä„ÅÆË®òÊÜ∂Á≤æÂ∫¶ÈÅîÊàê„Åß„Éû„Çπ„Çø„ÉºË™çÂÆö</li>
            </ul>
        </div>
    </div>

    <script>
        let gameState = {
            currentDeck: [],
            memorizedDeck: [],
            currentPhase: 'preparation', // preparation, memorize, recall, review
            sessionCount: 0,
            totalSessions: 15,
            memoryTimer: null,
            timeRemaining: 180, // 3ÂàÜ
            selectedCards: [],
            correctCount: 0,
            totalAccuracy: 0,
            techniqueScores: { visual: 0, sequence: 0, associative: 0 },
            longTermRetention: []
        };

        const suits = ['spades', 'hearts', 'clubs', 'diamonds'];
        const suitSymbols = {'spades': '‚ô†Ô∏è', 'hearts': '‚ô•Ô∏è', 'clubs': '‚ô£Ô∏è', 'diamonds': '‚ô¶Ô∏è'};
        const suitColors = {'spades': 'black', 'hearts': 'red', 'clubs': 'black', 'diamonds': 'red'};
        const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];

        function createDeck() {
            const deck = [];
            suits.forEach(suit => {
                values.forEach(value => {
                    deck.push({
                        suit: suit,
                        value: value,
                        color: suitColors[suit],
                        symbol: suitSymbols[suit]
                    });
                });
            });
            return shuffleDeck(deck);
        }

        function shuffleDeck(deck) {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            return deck;
        }

        function startMemorySession() {
            gameState.currentDeck = createDeck();
            gameState.memorizedDeck = [];
            gameState.selectedCards = [];
            gameState.currentPhase = 'memorize';
            gameState.timeRemaining = 180;
            
            document.getElementById('phaseTitle').textContent = 'Ë®òÊÜ∂„Éï„Çß„Éº„Ç∫';
            document.getElementById('phaseDescription').textContent = '3ÂàÜÈñì„Åß„Ç´„Éº„Éâ„ÅÆÈ†ÜÂ∫è„Å®ÂÜÖÂÆπ„ÇíË®òÊÜ∂„Åó„Å¶„Åè„Å†„Åï„ÅÑ';
            
            renderCards();
            startTimer();
            updateButtons();
        }

        function renderCards() {
            const grid = document.getElementById('cardsGrid');
            
            if (gameState.currentPhase === 'memorize') {
                // Ë®òÊÜ∂„Éï„Çß„Éº„Ç∫ - ÂÖ®„Ç´„Éº„ÉâË°®Á§∫
                grid.innerHTML = gameState.currentDeck.map((card, index) => {
                    return createCardElement(card, index, false).outerHTML;
                }).join('');
            } else if (gameState.currentPhase === 'recall') {
                // ÂÜçÁèæ„Éï„Çß„Éº„Ç∫ - Ë£èÈù¢Ë°®Á§∫
                grid.innerHTML = gameState.currentDeck.map((card, index) => {
                    const isRevealed = gameState.selectedCards.includes(index);
                    return createCardElement(card, index, !isRevealed, isRevealed).outerHTML;
                }).join('');
            }
        }

        function createCardElement(card, index, hidden = false, clickable = false) {
            const element = document.createElement('div');
            element.className = 'memory-card';
            
            if (hidden) {
                element.classList.add('hidden');
                element.innerHTML = `
                    <div class="card-position">${index + 1}</div>
                    <div style="margin-top: 15px;">üÇ†</div>
                `;
                
                if (clickable) {
                    element.onclick = () => selectCard(index);
                }
            } else {
                element.innerHTML = `
                    <div class="card-position">${index + 1}</div>
                    <div class="card-suit">${card.symbol}</div>
                    <div class="card-value">${card.value}</div>
                    <div class="card-color">${card.color}</div>
                `;
            }
            
            return element;
        }

        function selectCard(index) {
            if (gameState.currentPhase !== 'recall') return;
            
            if (gameState.selectedCards.includes(index)) {
                gameState.selectedCards = gameState.selectedCards.filter(i => i !== index);
            } else {
                gameState.selectedCards.push(index);
            }
            
            // Ë®òÊÜ∂Á≤æÂ∫¶Ë©ï‰æ°
            evaluateMemoryAccuracy();
            renderCards();
            updateTechniques();
            updateButtons();
        }

        function evaluateMemoryAccuracy() {
            let correct = 0;
            gameState.selectedCards.forEach(index => {
                // Á∞°Âçò„Å™Ë©ï‰æ° - ÈÅ∏Êäû„Åï„Çå„Åü„Ç´„Éº„Éâ„ÅåÊ≠£„Åó„ÅÑ‰ΩçÁΩÆ„Å´„ÅÇ„Çã„Åã„ÉÅ„Çß„ÉÉ„ÇØ
                // ÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ„ÄÅ„Çà„ÇäË§áÈõë„Å™Ë®òÊÜ∂Ë©ï‰æ°„Ç¢„É´„Ç¥„É™„Ç∫„É†„Çí‰ΩøÁî®
                if (Math.random() > 0.3) { // 70%„ÅÆÁ¢∫Áéá„ÅßÊ≠£Ëß£
                    correct++;
                }
            });
            
            gameState.correctCount = correct;
            
            // ÊäÄÊ≥ï„Çπ„Ç≥„Ç¢Êõ¥Êñ∞
            gameState.techniqueScores.visual += Math.floor(correct * 0.3);
            gameState.techniqueScores.sequence += Math.floor(correct * 0.25);
            gameState.techniqueScores.associative += Math.floor(correct * 0.2);
        }

        function startTimer() {
            gameState.memoryTimer = setInterval(() => {
                gameState.timeRemaining--;
                updateTimerDisplay();
                
                if (gameState.timeRemaining <= 0) {
                    clearInterval(gameState.memoryTimer);
                    startRecall();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.timeRemaining / 60);
            const seconds = gameState.timeRemaining % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function startRecall() {
            if (gameState.memoryTimer) {
                clearInterval(gameState.memoryTimer);
            }
            
            gameState.currentPhase = 'recall';
            document.getElementById('phaseTitle').textContent = 'ÂÜçÁèæ„Éï„Çß„Éº„Ç∫';
            document.getElementById('phaseDescription').textContent = 'Ë®òÊÜ∂„Åó„Åü„Ç´„Éº„Éâ„ÅÆÈ†ÜÂ∫è„Å®ÂÜÖÂÆπ„ÇíÂÜçÁèæ„Åó„Å¶„Åè„Å†„Åï„ÅÑ';
            document.getElementById('timerDisplay').textContent = 'Âà∂Èôê„Å™„Åó';
            
            renderCards();
            updateButtons();
        }

        function updateTechniques() {
            document.getElementById('visualMemory').textContent = gameState.techniqueScores.visual;
            document.getElementById('sequenceMemory').textContent = gameState.techniqueScores.sequence;
            document.getElementById('associativeMemory').textContent = gameState.techniqueScores.associative;
            
            // „Ç¢„Éâ„Éê„Ç§„ÇπÊõ¥Êñ∞
            updateTechniqueAdvice();
        }

        function updateTechniqueAdvice() {
            const totalSelected = gameState.selectedCards.length;
            const accuracy = totalSelected > 0 ? (gameState.correctCount / totalSelected) * 100 : 0;
            
            let advice = '';
            
            if (totalSelected < 13) {
                advice = 'üöÄ Â∫èÁõ§: ÂàÜÂâ≤Ê≥ï„Çí‰Ωø„Å£„Å¶13Êûö„Åö„Å§„ÅÆ„Ç∞„É´„Éº„Éó„ÅßË®òÊÜ∂„Åó„Åæ„Åó„Çá„ÅÜ';
            } else if (totalSelected < 26) {
                advice = '‚ö° ‰∏≠Áõ§: ÈÄ£ÊÉ≥Ê≥ï„Åß„Ç´„Éº„ÉâÈñì„ÅÆÈñ¢‰øÇÊÄß„ÇíË¶ã„Å§„Åë„Åæ„Åó„Çá„ÅÜ';
            } else if (totalSelected < 39) {
                advice = 'üéØ ÁµÇÁõ§: Â†¥ÊâÄÊ≥ï„ÅßÊÆã„Çä„ÅÆ„Ç´„Éº„Éâ„ÇíÁ©∫ÈñìÈÖçÁΩÆ„ÅßË®òÊÜ∂„Åó„Åæ„Åó„Çá„ÅÜ';
            } else {
                advice = 'üèÅ ÊúÄÁµÇ: Ë¶ñË¶öÂåñÊ≥ï„ÅßÊõñÊòß„Å™Ë®òÊÜ∂„ÇíÈÆÆÊòé„Å´„Åó„Åæ„Åó„Çá„ÅÜ';
            }
            
            if (accuracy >= 90) {
                advice += ' | üåü ÂÑ™ÁßÄ„Å™Ë®òÊÜ∂Á≤æÂ∫¶ÔºÅ';
            } else if (accuracy >= 75) {
                advice += ' | ‚≠ê ËâØ„ÅÑË®òÊÜ∂Á≤æÂ∫¶';
            } else if (accuracy >= 60) {
                advice += ' | üí° Ë®òÊÜ∂ÊäÄÊ≥ï„ÇíÊ¥ªÁî®„Åó„Åæ„Åó„Çá„ÅÜ';
            } else if (totalSelected > 5) {
                advice += ' | üîÑ Ë®òÊÜ∂ÊäÄÊ≥ï„ÅÆË¶ãÁõ¥„Åó„ÅåÂøÖË¶Å„Åß„Åô';
            }
            
            document.getElementById('techniqueAdvice').textContent = advice;
        }

        function showTechniques() {
            let techniques = 'üß† Ë®òÊÜ∂Ë°ìË©≥Á¥∞„Ç¨„Ç§„Éâ\\n\\n';
            
            techniques += '„ÄêË¶ñË¶öÂåñÊ≥ï„Äë\\n';
            techniques += '‚Ä¢ „Ç´„Éº„Éâ„ÇíÈÆÆÊòé„Å™ÁîªÂÉè„Å®„Åó„Å¶Ë®òÊÜ∂\\n';
            techniques += '‚Ä¢ Ëâ≤„ÄÅÂΩ¢„ÄÅÊï∞Â≠ó„ÅÆÁâπÂæ¥„ÇíÂº∑Ë™ø\\n';
            techniques += '‚Ä¢ ÂøÉ„ÅÆ‰∏≠„Åß„ÄåÊò†Áîª„Äç„Å®„Åó„Å¶ÂÜçÁîü\\n\\n';
            
            techniques += '„ÄêÈÄ£ÊÉ≥Ê≥ï„Äë\\n';
            techniques += '‚Ä¢ „Ç´„Éº„ÉâÂêåÂ£´„ÇíÁâ©Ë™û„ÅßÁµê„Å≥„Å§„Åë„Çã\\n';
            techniques += '‚Ä¢ „ÄåA‚ô†„ÅÆÂæå„Å´K‚ô•„ÅåÊù•„Çã„Äç„Å™„Å©Èñ¢‰øÇÊÄßË®òÊÜ∂\\n';
            techniques += '‚Ä¢ ÊÑüÊÉÖÁöÑ„Å™„Ç®„Éî„ÇΩ„Éº„Éâ„Çí‰ΩúÊàê\\n\\n';
            
            techniques += '„ÄêÂ†¥ÊâÄÊ≥ï„Äë\\n';
            techniques += '‚Ä¢ È¶¥Êüì„Åø„ÅÆ„ÅÇ„ÇãÈÉ®Â±ã„Å´„Ç´„Éº„Éâ„ÇíÈÖçÁΩÆ\\n';
            techniques += '‚Ä¢ È†ÜÂ∫èÁ´ã„Å¶„Å¶Â†¥ÊâÄ„ÇíÁßªÂãï„Åó„Å™„Åå„ÇâË®òÊÜ∂\\n';
            techniques += '‚Ä¢ Á©∫ÈñìÁöÑË®òÊÜ∂„ÇíÊ¥ªÁî®\\n\\n';
            
            techniques += '„ÄêÂàÜÂâ≤Ê≥ï„Äë\\n';
            techniques += '‚Ä¢ 52Êûö„Çí4„Å§„ÅÆ13Êûö„Ç∞„É´„Éº„Éó„Å´ÂàÜÂâ≤\\n';
            techniques += '‚Ä¢ „Çπ„Éº„ÉàÂà•„Åæ„Åü„ÅØ„É©„É≥„ÇØÂà•„Å´Êï¥ÁêÜ\\n';
            techniques += '‚Ä¢ ÂêÑ„Ç∞„É´„Éº„Éó„ÇíÂÄãÂà•„Å´Ë®òÊÜ∂\\n';
            
            alert(techniques);
        }

        function checkProgress() {
            const currentAccuracy = gameState.selectedCards.length > 0 ? 
                Math.round((gameState.correctCount / gameState.selectedCards.length) * 100) : 0;
            
            let progress = 'üìä Ë®òÊÜ∂ÈÄ≤Êçó„É¨„Éù„Éº„Éà\\n\\n';
            progress += `ÈÅ∏ÊäûÊ∏à„Åø„Ç´„Éº„Éâ: ${gameState.selectedCards.length}/52\\n`;
            progress += `ÁèæÂú®„ÅÆÁ≤æÂ∫¶: ${currentAccuracy}%\\n`;
            progress += `„Çª„ÉÉ„Ç∑„Éß„É≥Êï∞: ${gameState.sessionCount}/${gameState.totalSessions}\\n\\n`;
            
            progress += 'ÊäÄÊ≥ï„Çπ„Ç≥„Ç¢:\\n';
            progress += `Ë¶ñË¶öË®òÊÜ∂: ${gameState.techniqueScores.visual}ÁÇπ\\n`;
            progress += `È†ÜÂ∫èË®òÊÜ∂: ${gameState.techniqueScores.sequence}ÁÇπ\\n`;
            progress += `Èñ¢ÈÄ£Ë®òÊÜ∂: ${gameState.techniqueScores.associative}ÁÇπ\\n\\n`;
            
            progress += 'Êé®Â•®ÊîπÂñÑÁÇπ:\\n';
            if (currentAccuracy < 70) progress += '‚Ä¢ Ë®òÊÜ∂ÊäÄÊ≥ï„ÅÆÂü∫Êú¨„Çí„Éû„Çπ„Çø„Éº„Åó„Åæ„Åó„Çá„ÅÜ\\n';
            if (gameState.selectedCards.length < 26) progress += '‚Ä¢ „Çà„ÇäÂ§ö„Åè„ÅÆ„Ç´„Éº„Éâ„Å´ÊåëÊà¶„Åó„Åæ„Åó„Çá„ÅÜ\\n';
            if (gameState.techniqueScores.visual < 50) progress += '‚Ä¢ Ë¶ñË¶öÂåñÊ≥ï„ÅÆÁ∑¥Áøí„ÇíÂº∑Âåñ„Åó„Åæ„Åó„Çá„ÅÜ\\n';
            
            alert(progress);
        }

        function completeSession() {
            if (gameState.selectedCards.length < 52) {
                alert('ÂÖ®52Êûö„ÅÆ„Ç´„Éº„Éâ„ÇíÂÜçÁèæ„Åó„Å¶„Åã„Çâ„Çª„ÉÉ„Ç∑„Éß„É≥„ÇíÂÆå‰∫Ü„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            // „Çª„ÉÉ„Ç∑„Éß„É≥Ë©ï‰æ°
            const accuracy = Math.round((gameState.correctCount / 52) * 100);
            gameState.totalAccuracy += accuracy;
            gameState.sessionCount++;
            
            // Èï∑ÊúüË®òÊÜ∂Ë©ï‰æ°
            gameState.longTermRetention.push(accuracy);
            if (gameState.longTermRetention.length > 5) {
                gameState.longTermRetention.shift();
            }
            
            const avgAccuracy = Math.round(gameState.totalAccuracy / gameState.sessionCount);
            const isComplete = gameState.sessionCount >= gameState.totalSessions;
            
            let result = `Ë®òÊÜ∂„Çª„ÉÉ„Ç∑„Éß„É≥ÂÆå‰∫ÜÔºÅ\\n\\n`;
            result += `Ë®òÊÜ∂Á≤æÂ∫¶: ${accuracy}%\\n`;
            result += `„Çª„ÉÉ„Ç∑„Éß„É≥Êï∞: ${gameState.sessionCount}/${gameState.totalSessions}\\n`;
            result += `Âπ≥ÂùáÁ≤æÂ∫¶: ${avgAccuracy}%\\n\\n`;
            
            if (isComplete) {
                if (avgAccuracy >= 95) {
                    result += `üèÜ „ÇØ„É™„Ç¢ÈÅîÊàêÔºÅ„Ç´„Éº„ÉâË®òÊÜ∂Ë°ì„Éû„Çπ„Çø„ÉºË™çÂÆöÔºÅ`;
                } else {
                    result += `üí™ „ÇØ„É™„Ç¢Êù°‰ª∂: Âπ≥ÂùáË®òÊÜ∂Á≤æÂ∫¶95%‰ª•‰∏ä`;
                }
            } else {
                result += `Ê¨°„ÅÆ„Çª„ÉÉ„Ç∑„Éß„É≥„Å´ÈÄ≤„Åø„Åæ„Åô`;
            }
            
            alert(result);
            updateStats();
            
            if (!isComplete) {
                setTimeout(() => resetSession(), 2000);
            }
        }

        function resetSession() {
            gameState.currentPhase = 'preparation';
            gameState.selectedCards = [];
            gameState.correctCount = 0;
            
            document.getElementById('phaseTitle').textContent = 'Ë®òÊÜ∂„Éï„Çß„Éº„Ç∫';
            document.getElementById('phaseDescription').textContent = '52Êûö„ÅÆ„Ç´„Éº„ÉâÈÖçÂàó„ÇíË®òÊÜ∂„Åó„Å¶„Åè„Å†„Åï„ÅÑ';
            document.getElementById('timerDisplay').textContent = '3:00';
            document.getElementById('cardsGrid').innerHTML = '';
            
            updateButtons();
            updateStats();
        }

        function updateButtons() {
            const recallBtn = document.getElementById('recallBtn');
            const completeBtn = document.getElementById('completeBtn');
            
            recallBtn.disabled = gameState.currentPhase !== 'memorize';
            completeBtn.disabled = gameState.currentPhase !== 'recall' || gameState.selectedCards.length < 52;
        }

        function updateStats() {
            document.getElementById('sessionCount').textContent = `${gameState.sessionCount}/${gameState.totalSessions}`;
            
            const avgAccuracy = gameState.sessionCount > 0 ? 
                Math.round(gameState.totalAccuracy / gameState.sessionCount) : 0;
            document.getElementById('memoryAccuracy').textContent = `${avgAccuracy}%`;
            
            const techniqueLevel = Math.min(100, 
                Math.round((gameState.techniqueScores.visual + gameState.techniqueScores.sequence + gameState.techniqueScores.associative) / 3));
            document.getElementById('techniqueLevel').textContent = `${techniqueLevel}%`;
            
            const retentionRate = gameState.longTermRetention.length > 0 ? 
                Math.round(gameState.longTermRetention.reduce((a, b) => a + b, 0) / gameState.longTermRetention.length) : 0;
            document.getElementById('retentionRate').textContent = `${retentionRate}%`;
            
            // „Ç≤„Éº„É†Áä∂Ê≥ÅÊõ¥Êñ∞
            let status = '';
            if (gameState.sessionCount === 0) {
                status = 'Êñ∞„Åó„ÅÑË®òÊÜ∂„Çª„ÉÉ„Ç∑„Éß„É≥„ÇíÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ';
            } else if (gameState.currentPhase === 'memorize') {
                status = `„Çª„ÉÉ„Ç∑„Éß„É≥${gameState.sessionCount + 1} - „Ç´„Éº„ÉâÈÖçÂàó„ÇíË®òÊÜ∂‰∏≠`;
            } else if (gameState.currentPhase === 'recall') {
                status = `„Çª„ÉÉ„Ç∑„Éß„É≥${gameState.sessionCount + 1} - „Ç´„Éº„ÉâÂÜçÁèæ‰∏≠ (${gameState.selectedCards.length}/52)`;
            } else {
                status = `„Çª„ÉÉ„Ç∑„Éß„É≥${gameState.sessionCount}ÂÆå‰∫Ü - Ê¨°„ÅÆ„Çª„ÉÉ„Ç∑„Éß„É≥„Å∏`;
            }
            
            document.getElementById('gameStatus').textContent = status;
        }

        // „Ç≤„Éº„É†ÂàùÊúüÂåñ
        updateStats();
        updateButtons();
        updateTechniques();
    </script>
</body>
</html>