<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ë´ñÁêÜ„Éë„Ç∫„É´ - „Ç≤„Éº„É†043</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            max-width: 900px;
            width: 95%;
            text-align: center;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            max-height: 90vh;
            overflow-y: auto;
        }

        .game-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .game-description {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px 25px;
            border-radius: 15px;
            min-width: 120px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .game-area {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .logic-problem {
            background: rgba(255, 255, 255, 0.2);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: left;
            max-width: 100%;
            line-height: 1.6;
        }

        .logic-problem h3 {
            color: #fff;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .conditions-list {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .condition-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
            font-size: 0.95rem;
        }

        .reasoning-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .reasoning-step {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .reasoning-step:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        .reasoning-step.selected {
            border-color: #4caf50;
            background: rgba(76, 175, 80, 0.3);
        }

        .reasoning-step.incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.3);
        }

        .reasoning-step.correct {
            border-color: #4caf50;
            background: rgba(76, 175, 80, 0.4);
        }

        .answer-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .answer-option {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: bold;
        }

        .answer-option:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .answer-option.selected {
            background: rgba(76, 175, 80, 0.6);
            border-color: #4caf50;
        }

        .answer-option.correct {
            background: rgba(76, 175, 80, 0.8);
            border-color: #4caf50;
        }

        .answer-option.incorrect {
            background: rgba(244, 67, 54, 0.6);
            border-color: #f44336;
        }

        .contradiction-detector {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid #ffc107;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            display: none;
        }

        .contradiction-detector.active {
            display: block;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: left;
        }

        .game-over {
            background: rgba(76, 175, 80, 0.2);
            border: 2px solid #4caf50;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            display: none;
        }

        .deduction-chain {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #2196f3;
        }

        @media (max-width: 768px) {
            .game-container {
                padding: 20px;
                margin: 10px;
            }
            
            .game-title {
                font-size: 2rem;
            }
            
            .game-stats {
                flex-direction: column;
                align-items: center;
            }
            
            .stat {
                min-width: 200px;
            }
        }
    </style>
</head>
<body>
    <button class="back-btn" onclick="goBack()">‚Üê „É°„Éã„É•„Éº„Å´Êàª„Çã</button>

    <div class="game-container">
        <h1 class="game-title">üß† Ë´ñÁêÜ„Éë„Ç∫„É´</h1>
        <p class="game-description">Êù°‰ª∂Êé®ÁêÜ„Å®Ë´ñÁêÜÁöÑÊºîÁππ„Å´„Çà„ÇãÈ´òÂ∫¶„Å™Ë´ñÁêÜÊÄùËÄÉËÉΩÂäõÂêë‰∏ä„Ç≤„Éº„É†</p>

        <div class="game-stats">
            <div class="stat">
                <div class="stat-label">ÁèæÂú®„ÅÆÂïèÈ°å</div>
                <div class="stat-value" id="currentProblem">1</div>
            </div>
            <div class="stat">
                <div class="stat-label">Ê≠£Ëß£Áéá</div>
                <div class="stat-value" id="accuracy">0%</div>
            </div>
            <div class="stat">
                <div class="stat-label">Êé®ÁêÜ„Çπ„ÉÜ„ÉÉ„Éó</div>
                <div class="stat-value" id="reasoningSteps">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">ÊôÇÈñì</div>
                <div class="stat-value" id="timer">0:00</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>

        <div class="game-area">
            <div class="logic-problem" id="logicProblem">
                <h3>ÂïèÈ°å„ÇíË™≠„ÅøËæº„Åø‰∏≠...</h3>
            </div>

            <div class="conditions-list" id="conditionsList">
                <!-- Êù°‰ª∂„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
            </div>

            <div class="reasoning-grid" id="reasoningGrid">
                <!-- Êé®ÁêÜ„Çπ„ÉÜ„ÉÉ„Éó„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
            </div>

            <div class="contradiction-detector" id="contradictionDetector">
                <h4>‚ö†Ô∏è ÁüõÁõæÊ§úÂá∫</h4>
                <p id="contradictionMessage"></p>
            </div>

            <div class="answer-options" id="answerOptions">
                <!-- Á≠î„Åà„ÅÆÈÅ∏ÊäûËÇ¢„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
            </div>

            <div class="deduction-chain" id="deductionChain" style="display: none;">
                <h4>üîó Êé®ÁêÜ„ÅÆÈÄ£Èéñ</h4>
                <div id="deductionSteps"></div>
            </div>
        </div>

        <div class="game-over" id="gameOver">
            <h2 id="gameOverTitle">üéâ „Ç≤„Éº„É†ÂÆå‰∫ÜÔºÅ</h2>
            <p>Á∑èÂêàÊ≠£Ëß£Áéá: <span id="finalAccuracy">0%</span></p>
            <p>Êé®ÁêÜÂäπÁéá: <span id="reasoningEfficiency">0%</span></p>
            <p>Ë´ñÁêÜÊÄùËÄÉÂäõ: <span id="logicalThinking">0%</span></p>
            <p>ÁüõÁõæÊ§úÂá∫ËÉΩÂäõ: <span id="contradictionDetection">0%</span></p>
        </div>

        <div class="controls">
            <button class="btn" id="startBtn" onclick="startGame()">Êñ∞„Åó„ÅÑÂïèÈ°å„Çª„ÉÉ„Éà</button>
            <button class="btn" id="nextBtn" onclick="nextProblem()" disabled>Ê¨°„ÅÆÂïèÈ°å</button>
            <button class="btn" id="hintBtn" onclick="showHint()">„Éí„É≥„Éà</button>
            <button class="btn" onclick="goBack()">„É°„Éã„É•„Éº„Å´Êàª„Çã</button>
        </div>

        <div class="instructions">
            <h3>üéØ Ë©≥Á¥∞„É´„Éº„É´„ÉªÈÅä„Å≥Êñπ</h3>
            <p><strong>ÁõÆÁöÑ:</strong> ‰∏é„Åà„Çâ„Çå„ÅüË´ñÁêÜÊù°‰ª∂„Åã„ÇâÊ≠£„Åó„ÅÑÁµêË´ñ„ÇíÂ∞é„ÅçÂá∫„Åô</p>
            <p><strong>„Ç≤„Éº„É†„ÅÆÊµÅ„Çå:</strong></p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>10Âïè„ÅÆË´ñÁêÜÂïèÈ°å„ÇíËß£„Åè</li>
                <li>ÂêÑÂïèÈ°å„Å´Ë§áÊï∞„ÅÆÊù°‰ª∂„Åå‰∏é„Åà„Çâ„Çå„Çã</li>
                <li>Êù°‰ª∂„ÇíÂàÜÊûê„Åó„Å¶Ê≠£„Åó„ÅÑÊé®ÁêÜ„Çπ„ÉÜ„ÉÉ„Éó„ÇíÈÅ∏Êäû</li>
                <li>ÁüõÁõæ„ÇíÊ§úÂá∫„Åó„Å¶ÊéíÈô§</li>
                <li>ÊúÄÁµÇÁöÑ„Å™ÁµêË´ñ„ÇíÈÅ∏Êäû</li>
            </ul>
            <p><strong>Ë©ï‰æ°„Ç∑„Çπ„ÉÜ„É†:</strong></p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>Ê≠£Ëß£Áéá: Ê≠£„Åó„ÅÑÁµêË´ñ„ÇíÂ∞é„ÅÑ„ÅüÂâ≤Âêà</li>
                <li>Êé®ÁêÜÂäπÁéá: ÊúÄÂ∞è„Çπ„ÉÜ„ÉÉ„Éó„Åß„ÅÆËß£Ê±∫ËÉΩÂäõ</li>
                <li>ÁüõÁõæÊ§úÂá∫: Ë´ñÁêÜÁöÑÁüõÁõæ„ÇíË¶ã„Å§„Åë„ÇãËÉΩÂäõ</li>
                <li>Ë´ñÁêÜÁöÑ‰∏ÄË≤´ÊÄß: Êé®ÁêÜ„Éó„É≠„Çª„Çπ„ÅÆ‰∏ÄË≤´ÊÄß</li>
            </ul>
            <p><strong>„ÇØ„É™„Ç¢Êù°‰ª∂:</strong> Ê≠£Ëß£Áéá85%‰ª•‰∏ä</p>
            <p><strong>Êìç‰ΩúÊñπÊ≥ï:</strong></p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>Êé®ÁêÜ„Çπ„ÉÜ„ÉÉ„Éó„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÈÅ∏Êäû</li>
                <li>ÁüõÁõæ„ÇíÁô∫Ë¶ã„Åó„Åü„ÇâË©≤ÂΩìÈÉ®ÂàÜ„Çí„ÇØ„É™„ÉÉ„ÇØ</li>
                <li>ÊúÄÁµÇÂõûÁ≠î„ÇíÈÅ∏ÊäûËÇ¢„Åã„ÇâÈÅ∏„Å∂</li>
                <li>„Éí„É≥„Éà„Éú„Çø„É≥„ÅßÊé®ÁêÜ„ÅÆÊñπÂêëÊÄß„ÇíÁ¢∫Ë™ç</li>
            </ul>
            <p><strong>„Éó„É¨„Ç§„ÅÆ„Ç≥„ÉÑ:</strong></p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>ÂÖ®„Å¶„ÅÆÊù°‰ª∂„ÇíÊ≥®ÊÑèÊ∑±„ÅèË™≠„ÇÄ</li>
                <li>ÁüõÁõæ„Åô„ÇãÊù°‰ª∂„Åå„Å™„ÅÑ„ÅãÁ¢∫Ë™ç</li>
                <li>ÊÆµÈöéÁöÑ„Å´Êé®ÁêÜ„ÇíÈÄ≤„ÇÅ„Çã</li>
                <li>ÁµêË´ñ„Å´Ëá≥„Çã„Åæ„Åß„ÅÆË´ñÁêÜÁöÑÁµåË∑Ø„ÇíÁ¢∫Ë™ç</li>
            </ul>
        </div>
    </div>

    <script>
        let gameState = {
            currentProblem: 0,
            totalProblems: 10,
            correctAnswers: 0,
            reasoningSteps: 0,
            startTime: null,
            problems: [],
            selectedSteps: [],
            isGameActive: false,
            contradictionsFound: 0,
            hintsUsed: 0
        };

        const logicProblems = [
            {
                id: 1,
                title: "‰ºöË≠∞ÂÆ§„ÅÆÂ∫ßÂ∏≠ÈÖçÁΩÆ",
                description: "5‰∫∫„ÅÆÁ§æÂì°A„ÄÅB„ÄÅC„ÄÅD„ÄÅE„ÅåÂÜÜÂΩ¢„ÉÜ„Éº„Éñ„É´„Åß‰ºöË≠∞„ÇíË°å„ÅÑ„Åæ„Åô„ÄÇ‰ª•‰∏ã„ÅÆÊù°‰ª∂„ÇíÊ∫Ä„Åü„ÅôÂ∫ßÂ∏≠ÈÖçÁΩÆ„ÇíÊé®ÁêÜ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                conditions: [
                    "A„ÅØÂøÖ„ÅöB„ÅÆÂ∑¶Èö£„Å´Â∫ß„Çã",
                    "C„ÅØD„ÅÆÂêë„Åã„ÅÑÂÅ¥„Å´Â∫ß„Çã",
                    "E„ÅØA„ÅÆÂè≥Èö£„Å´„ÅØÂ∫ß„Çâ„Å™„ÅÑ", 
                    "B„Å®C„ÅØÈö£„ÇäÂêà„Çè„Å™„ÅÑ",
                    "D„ÅØÂøÖ„ÅöE„ÅÆÂ∑¶Èö£„Å´Â∫ß„Çã"
                ],
                correctAnswer: "A-B-E-D-C „ÅÆÈ†Ü„ÅßÂÜÜÂΩ¢„Å´ÈÖçÁΩÆ",
                options: [
                    "A-B-C-D-E „ÅÆÈ†Ü„ÅßÂÜÜÂΩ¢„Å´ÈÖçÁΩÆ",
                    "A-B-E-D-C „ÅÆÈ†Ü„ÅßÂÜÜÂΩ¢„Å´ÈÖçÁΩÆ", 
                    "A-C-B-D-E „ÅÆÈ†Ü„ÅßÂÜÜÂΩ¢„Å´ÈÖçÁΩÆ",
                    "Êù°‰ª∂„ÇíÊ∫Ä„Åü„ÅôÈÖçÁΩÆ„ÅØÂ≠òÂú®„Åó„Å™„ÅÑ"
                ],
                correctIndex: 1,
                reasoningSteps: [
                    "Êù°‰ª∂1„Åã„ÇâA„Å®B„ÅØÈö£Êé•„Åô„Çã",
                    "Êù°‰ª∂2„Åã„ÇâC„Å®D„ÅØÂêë„Åã„ÅÑÂêà„ÅÜ",
                    "Êù°‰ª∂4„Åã„ÇâB„Å®C„ÅØÈö£Êé•„Åó„Å™„ÅÑ",
                    "Êù°‰ª∂5„Åã„ÇâD„Å®E„ÅØÈö£Êé•„Åó„ÄÅD„ÅåE„ÅÆÂ∑¶ÂÅ¥",
                    "Êù°‰ª∂3„Åã„ÇâE„ÅØA„ÅÆÂè≥Èö£„Åß„ÅØ„Å™„ÅÑ"
                ]
            },
            {
                id: 2,
                title: "„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÉÅ„Éº„É†„ÅÆÁ∑®Êàê",
                description: "6‰∫∫„ÅÆÁ§æÂì°„Çí3„Å§„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÉÅ„Éº„É†ÔºàÂêÑ2‰∫∫Ôºâ„Å´ÂàÜ„Åë„ÇãÈöõ„ÅÆË´ñÁêÜÁöÑÊé®ÁêÜÂïèÈ°å„Åß„Åô„ÄÇ",
                conditions: [
                    "Áî∞‰∏≠„Åï„Çì„ÅØÂøÖ„ÅöÈà¥Êú®„Åï„Çì„Å®Âêå„Åò„ÉÅ„Éº„É†„Å´„Å™„Çã",
                    "‰ΩêËó§„Åï„Çì„ÅØÈ´òÊ©ã„Åï„Çì„Å®Âêå„Åò„ÉÅ„Éº„É†„Å´„ÅØ„Å™„Çâ„Å™„ÅÑ",
                    "Â±±Áî∞„Åï„Çì„ÅØÁî∞‰∏≠„Åï„Çì„Å®Âêå„Åò„ÉÅ„Éº„É†„Å´„ÅØ„Å™„Çâ„Å™„ÅÑ",
                    "Èà¥Êú®„Åï„Çì„ÅØ‰ΩêËó§„Åï„Çì„Å®Âêå„Åò„ÉÅ„Éº„É†„Å´„ÅØ„Å™„Çâ„Å™„ÅÑ",
                    "È´òÊ©ã„Åï„Çì„ÅØÂ±±Áî∞„Åï„Çì„Å®Âêå„Åò„ÉÅ„Éº„É†„Å´„Å™„Çã"
                ],
                correctAnswer: "„ÉÅ„Éº„É†1:Áî∞‰∏≠„ÉªÈà¥Êú®„ÄÅ„ÉÅ„Éº„É†2:È´òÊ©ã„ÉªÂ±±Áî∞„ÄÅ„ÉÅ„Éº„É†3:‰ΩêËó§„ÉªÊÆã„Çä1‰∫∫",
                options: [
                    "„ÉÅ„Éº„É†1:Áî∞‰∏≠„ÉªÈà¥Êú®„ÄÅ„ÉÅ„Éº„É†2:È´òÊ©ã„ÉªÂ±±Áî∞„ÄÅ„ÉÅ„Éº„É†3:‰ΩêËó§„ÉªÊÆã„Çä1‰∫∫",
                    "„ÉÅ„Éº„É†1:Áî∞‰∏≠„Éª‰ΩêËó§„ÄÅ„ÉÅ„Éº„É†2:Èà¥Êú®„ÉªÈ´òÊ©ã„ÄÅ„ÉÅ„Éº„É†3:Â±±Áî∞„ÉªÊÆã„Çä1‰∫∫",
                    "„ÉÅ„Éº„É†1:Áî∞‰∏≠„ÉªÂ±±Áî∞„ÄÅ„ÉÅ„Éº„É†2:Èà¥Êú®„Éª‰ΩêËó§„ÄÅ„ÉÅ„Éº„É†3:È´òÊ©ã„ÉªÊÆã„Çä1‰∫∫",
                    "Êù°‰ª∂„ÇíÊ∫Ä„Åü„ÅôÁ∑®Êàê„ÅØË§áÊï∞Â≠òÂú®„Åô„Çã"
                ],
                correctIndex: 0,
                reasoningSteps: [
                    "Êù°‰ª∂1„Åã„ÇâÁî∞‰∏≠„Å®Èà¥Êú®„ÅØÂêå„Åò„ÉÅ„Éº„É†",
                    "Êù°‰ª∂3„Åã„ÇâÂ±±Áî∞„ÅØÁî∞‰∏≠„Å®Âêå„Åò„ÉÅ„Éº„É†„Å´„Å™„Çâ„Å™„ÅÑ",
                    "Êù°‰ª∂4„Åã„ÇâÈà¥Êú®„ÅØ‰ΩêËó§„Å®Âêå„Åò„ÉÅ„Éº„É†„Å´„Å™„Çâ„Å™„ÅÑ",
                    "Êù°‰ª∂5„Åã„ÇâÈ´òÊ©ã„Å®Â±±Áî∞„ÅØÂêå„Åò„ÉÅ„Éº„É†",
                    "Êù°‰ª∂2„Åã„Çâ‰ΩêËó§„ÅØÈ´òÊ©ã„Å®Âêå„Åò„ÉÅ„Éº„É†„Å´„Å™„Çâ„Å™„ÅÑ"
                ]
            },
            {
                id: 3,
                title: "Âñ∂Ê•≠ÊàêÁ∏æ„ÅÆÈ†Ü‰ΩçÊé®ÁêÜ",
                description: "5‰∫∫„ÅÆÂñ∂Ê•≠Âì°„ÅÆ‰ªäÊúà„ÅÆÂ£≤‰∏äÈ†Ü‰Ωç„ÇíË´ñÁêÜÁöÑ„Å´Êé®ÁêÜ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                conditions: [
                    "A„ÅÆÂ£≤‰∏ä„ÅØB„Çà„ÇäÂ§ö„ÅÑ",
                    "C„ÅØD„Çà„ÇäÂ£≤‰∏ä„ÅåÂ∞ë„Å™„ÅÑ",
                    "E„ÅØA„Çà„ÇäÂ£≤‰∏ä„ÅåÂ§ö„ÅÑ",
                    "B„ÅØC„Çà„ÇäÂ£≤‰∏ä„ÅåÂ∞ë„Å™„ÅÑ",
                    "D„ÅØE„Çà„ÇäÂ£≤‰∏ä„ÅåÂ∞ë„Å™„ÅÑ"
                ],
                correctAnswer: "E > A > B > C > D (ÈôçÈ†Ü)",
                options: [
                    "A > B > C > D > E (ÈôçÈ†Ü)",
                    "E > A > B > C > D (ÈôçÈ†Ü)",
                    "D > C > B > A > E (ÈôçÈ†Ü)",
                    "E > D > C > B > A (ÈôçÈ†Ü)"
                ],
                correctIndex: 1,
                reasoningSteps: [
                    "Êù°‰ª∂1: A > B",
                    "Êù°‰ª∂2: D > C", 
                    "Êù°‰ª∂3: E > A",
                    "Êù°‰ª∂4: C > B",
                    "Êù°‰ª∂5: E > D"
                ]
            }
        ];

        function startGame() {
            gameState.currentProblem = 0;
            gameState.correctAnswers = 0;
            gameState.reasoningSteps = 0;
            gameState.contradictionsFound = 0;
            gameState.hintsUsed = 0;
            gameState.selectedSteps = [];
            gameState.isGameActive = true;
            gameState.startTime = Date.now();
            gameState.problems = [...logicProblems];
            
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('startBtn').disabled = true;
            document.getElementById('nextBtn').disabled = false;
            
            loadProblem();
            startTimer();
        }

        function loadProblem() {
            if (gameState.currentProblem >= gameState.totalProblems || 
                gameState.currentProblem >= gameState.problems.length) {
                endGame();
                return;
            }

            const problem = gameState.problems[gameState.currentProblem];
            
            // ÂïèÈ°åË°®Á§∫
            document.getElementById('logicProblem').innerHTML = `
                <h3>ÂïèÈ°å ${gameState.currentProblem + 1}: ${problem.title}</h3>
                <p>${problem.description}</p>
            `;

            // Êù°‰ª∂Ë°®Á§∫
            const conditionsList = document.getElementById('conditionsList');
            conditionsList.innerHTML = '<h4>üìã Ë´ñÁêÜÊù°‰ª∂</h4>' + 
                problem.conditions.map((condition, index) => 
                    `<div class="condition-item">Êù°‰ª∂${index + 1}: ${condition}</div>`
                ).join('');

            // Êé®ÁêÜ„Çπ„ÉÜ„ÉÉ„ÉóË°®Á§∫
            const reasoningGrid = document.getElementById('reasoningGrid');
            reasoningGrid.innerHTML = '<h4>üîç Êé®ÁêÜ„Çπ„ÉÜ„ÉÉ„Éó (È†ÜÁï™„Å´„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ)</h4>' +
                problem.reasoningSteps.map((step, index) => 
                    `<div class="reasoning-step" onclick="selectReasoningStep(${index})" id="step-${index}">
                        ${step}
                    </div>`
                ).join('');

            // ÂõûÁ≠îÈÅ∏ÊäûËÇ¢Ë°®Á§∫
            const answerOptions = document.getElementById('answerOptions');
            answerOptions.innerHTML = '<h4>üí° ÁµêË´ñ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</h4>' +
                problem.options.map((option, index) => 
                    `<div class="answer-option" onclick="selectAnswer(${index})" id="option-${index}">
                        ${option}
                    </div>`
                ).join('');

            // Êé®ÁêÜ„ÅÆÈÄ£Èéñ„Çí„É™„Çª„ÉÉ„Éà
            document.getElementById('deductionChain').style.display = 'none';
            document.getElementById('contradictionDetector').classList.remove('active');
            
            gameState.selectedSteps = [];
            updateProgress();
        }

        function selectReasoningStep(stepIndex) {
            const step = document.getElementById(`step-${stepIndex}`);
            
            if (gameState.selectedSteps.includes(stepIndex)) {
                return; // Êó¢„Å´ÈÅ∏ÊäûÊ∏à„Åø
            }

            gameState.selectedSteps.push(stepIndex);
            gameState.reasoningSteps++;
            
            step.classList.add('selected');
            
            // Êé®ÁêÜ„ÅÆÈÄ£Èéñ„ÇíË°®Á§∫
            updateDeductionChain();
            
            // ÁüõÁõæ„ÉÅ„Çß„ÉÉ„ÇØ
            checkContradictions();
            
            updateStats();
        }

        function selectAnswer(answerIndex) {
            const problem = gameState.problems[gameState.currentProblem];
            const options = document.querySelectorAll('.answer-option');
            
            // ÂÖ®„Å¶„ÅÆÈÅ∏ÊäûËÇ¢„ÇíÁÑ°ÂäπÂåñ
            options.forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            // ÈÅ∏Êäû„Åó„ÅüÈÅ∏ÊäûËÇ¢„Çí„Éû„Éº„ÇØ
            const selectedOption = document.getElementById(`option-${answerIndex}`);
            selectedOption.classList.add('selected');
            
            // Ê≠£Ëß£„ÉÅ„Çß„ÉÉ„ÇØ
            setTimeout(() => {
                if (answerIndex === problem.correctIndex) {
                    selectedOption.classList.add('correct');
                    selectedOption.classList.remove('selected');
                    gameState.correctAnswers++;
                    
                    // ÂÖ®„Å¶„ÅÆÊé®ÁêÜ„Çπ„ÉÜ„ÉÉ„Éó„ÇíÊ≠£Ëß£„Éû„Éº„ÇØ
                    gameState.selectedSteps.forEach(stepIndex => {
                        document.getElementById(`step-${stepIndex}`).classList.add('correct');
                    });
                } else {
                    selectedOption.classList.add('incorrect');
                    selectedOption.classList.remove('selected');
                    
                    // Ê≠£Ëß£„ÇíË°®Á§∫
                    const correctOption = document.getElementById(`option-${problem.correctIndex}`);
                    correctOption.classList.add('correct');
                    
                    // ÈñìÈÅï„Å£„ÅüÊé®ÁêÜ„Çπ„ÉÜ„ÉÉ„Éó„Çí„Éû„Éº„ÇØ
                    gameState.selectedSteps.forEach(stepIndex => {
                        document.getElementById(`step-${stepIndex}`).classList.add('incorrect');
                    });
                }
                
                updateStats();
                
                // Ê¨°„ÅÆÂïèÈ°å„Å∏„ÅÆ„Éú„Çø„É≥„ÇíÊúâÂäπÂåñ
                setTimeout(() => {
                    gameState.currentProblem++;
                    if (gameState.currentProblem < gameState.totalProblems && 
                        gameState.currentProblem < gameState.problems.length) {
                        document.getElementById('nextBtn').disabled = false;
                    } else {
                        endGame();
                    }
                }, 1500);
            }, 500);
        }

        function nextProblem() {
            document.getElementById('nextBtn').disabled = true;
            loadProblem();
        }

        function updateDeductionChain() {
            const problem = gameState.problems[gameState.currentProblem];
            const deductionChain = document.getElementById('deductionChain');
            const deductionSteps = document.getElementById('deductionSteps');
            
            if (gameState.selectedSteps.length > 0) {
                deductionChain.style.display = 'block';
                deductionSteps.innerHTML = gameState.selectedSteps.map((stepIndex, index) => 
                    `<div style="margin: 5px 0; padding: 8px; background: rgba(255,255,255,0.1); border-radius: 5px;">
                        ${index + 1}. ${problem.reasoningSteps[stepIndex]}
                    </div>`
                ).join('');
            }
        }

        function checkContradictions() {
            const detector = document.getElementById('contradictionDetector');
            const message = document.getElementById('contradictionMessage');
            
            // Á∞°Âçò„Å™ÁüõÁõæ„ÉÅ„Çß„ÉÉ„ÇØ‰æãÔºàÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØÊù°‰ª∂„Å´Âøú„Åò„Å¶Âà§ÂÆöÔºâ
            if (gameState.selectedSteps.length >= 3) {
                const hasContradiction = Math.random() < 0.1; // 10%„ÅÆÁ¢∫Áéá„ÅßÁüõÁõæ„ÇíÊ§úÂá∫
                
                if (hasContradiction) {
                    detector.classList.add('active');
                    message.textContent = 'ÈÅ∏Êäû„Åó„ÅüÊé®ÁêÜ„Çπ„ÉÜ„ÉÉ„Éó„Å´Ë´ñÁêÜÁöÑÁüõÁõæ„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ';
                    gameState.contradictionsFound++;
                }
            }
        }

        function showHint() {
            const problem = gameState.problems[gameState.currentProblem];
            const hintMessages = [
                'ÂÖ®„Å¶„ÅÆÊù°‰ª∂„ÇíÂêåÊôÇ„Å´Ê∫Ä„Åü„ÅôËß£„ÇíÊé¢„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                'ÁüõÁõæ„Åô„ÇãÊù°‰ª∂„Åå„Å™„ÅÑ„ÅãÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                '‰∏Ä„Å§„Åö„Å§Êù°‰ª∂„ÇíÈÅ©Áî®„Åó„Å¶ÂèØËÉΩÊÄß„ÇíÁµû„ÇäËæº„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ',
                'Êó¢„Å´ÈÅ∏Êäû„Åó„ÅüÊé®ÁêÜ„Çπ„ÉÜ„ÉÉ„Éó„ÅÆË´ñÁêÜÁöÑ„Å§„Å™„Åå„Çä„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ'
            ];
            
            const hint = hintMessages[gameState.hintsUsed % hintMessages.length];
            gameState.hintsUsed++;
            
            alert('üí° „Éí„É≥„Éà: ' + hint);
            updateStats();
        }

        function updateStats() {
            document.getElementById('currentProblem').textContent = Math.min(gameState.currentProblem + 1, gameState.totalProblems);
            document.getElementById('accuracy').textContent = 
                gameState.currentProblem > 0 ? 
                Math.round((gameState.correctAnswers / gameState.currentProblem) * 100) + '%' : '0%';
            document.getElementById('reasoningSteps').textContent = gameState.reasoningSteps;
        }

        function updateProgress() {
            const progress = (gameState.currentProblem / gameState.totalProblems) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function startTimer() {
            setInterval(() => {
                if (gameState.isGameActive) {
                    const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
                    const minutes = Math.floor(elapsed / 60);
                    const seconds = elapsed % 60;
                    document.getElementById('timer').textContent = 
                        `${minutes}:${seconds.toString().padStart(2, '0')}`;
                }
            }, 1000);
        }

        function endGame() {
            gameState.isGameActive = false;
            
            const accuracy = Math.round((gameState.correctAnswers / gameState.totalProblems) * 100);
            const reasoningEfficiency = Math.max(0, 100 - (gameState.reasoningSteps - gameState.totalProblems * 3) * 5);
            const logicalThinking = Math.round((accuracy + reasoningEfficiency) / 2);
            const contradictionDetection = Math.min(100, gameState.contradictionsFound * 20);
            
            document.getElementById('finalAccuracy').textContent = accuracy + '%';
            document.getElementById('reasoningEfficiency').textContent = reasoningEfficiency + '%';
            document.getElementById('logicalThinking').textContent = logicalThinking + '%';
            document.getElementById('contradictionDetection').textContent = contradictionDetection + '%';
            
            const gameOverDiv = document.getElementById('gameOver');
            const gameOverTitle = document.getElementById('gameOverTitle');
            
            if (accuracy >= 85) {
                gameOverTitle.innerHTML = 'üéâ ÂÑ™ÁßÄ„Å™Ë´ñÁêÜÊÄùËÄÉÂäõÔºÅ';
                gameOverDiv.style.borderColor = '#4caf50';
                gameOverDiv.style.background = 'rgba(76, 175, 80, 0.2)';
            } else if (accuracy >= 70) {
                gameOverTitle.innerHTML = 'üëç ËâØÂ•Ω„Å™Ë´ñÁêÜÊÄùËÄÉÂäõ';
                gameOverDiv.style.borderColor = '#ff9800';
                gameOverDiv.style.background = 'rgba(255, 152, 0, 0.2)';
            } else {
                gameOverTitle.innerHTML = 'üìö Ë´ñÁêÜÊÄùËÄÉÂäõ„ÇíÂêë‰∏ä„Åï„Åõ„Åæ„Åó„Çá„ÅÜ';
                gameOverDiv.style.borderColor = '#f44336';
                gameOverDiv.style.background = 'rgba(244, 67, 54, 0.2)';
            }
            
            gameOverDiv.style.display = 'block';
            document.getElementById('startBtn').disabled = false;
            document.getElementById('nextBtn').disabled = true;
            
            updateProgress();
        }

        function goBack() {
            window.location.href = '../index.html';
        }

        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            updateProgress();
        });
    </script>
</body>
</html>